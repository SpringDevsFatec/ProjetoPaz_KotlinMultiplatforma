<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAZ - Editar Produtos</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

<div class="page-container">
    <header class="header">
        <div id="menu-btn" style="font-size: 28px; cursor: pointer; margin-left: 10px;">â˜°</div>
        <div id="dropdown-menu" style="display:none; position:absolute; top:60px; left:10px; background:white; padding:15px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.2); z-index:999;">
            <a href="Tela_Cadastrar.html" class="btn-secondary" style="display:block; margin-bottom:10px;">Cadastrar</a>
            <a href="Editar_Estoque.html" class="btn-secondary" style="display:block; margin-bottom:10px;">Editar</a>
            <a href="Tela_Sobre_Venda.html" class="btn-secondary" style="display:block; margin-bottom:10px;">HistÃ³rico</a>
            <a href="index.html" class="btn-secondary" style="display:block;">Sair</a>
        </div>
        <h1 style="margin: auto;">
            <a href="Tela_Estoque_Produtos.html">
                <img src="IMG/Logo.png" alt="Logo PAZ" style="height: 35px; vertical-align: middle;">
            </a>
        </h1>
        <div class="profile-icon" style="margin-right: 15px;">
            <a href="Tela_Editar_Usuario.html">ðŸ‘¤</a>
        </div>
    </header>

    <main class="main-content">
        <h2 class="section-title">Editar Produtos</h2>

        <div id="productGrid" class="product-grid"></div>
    </main>
</div>

<script>
let products = [
    { id: 1, name: "Garrafa de Ãgua", price: 5.50, category: "bebidas", img: "IMG/CafÃ©.png" },
    { id: 2, name: "Brigadeiro", price: 3.20, category: "doces", img: "IMG/CafÃ©.png" },
    { id: 3, name: "Coxinha", price: 7.80, category: "salgados", img: "IMG/CafÃ©.png" },
];

const grid = document.getElementById("productGrid");

function renderProducts() {
    grid.innerHTML = "";

    products.forEach(prod => {
        const card = document.createElement("div");
        card.className = "product-card";

        card.innerHTML = `
            <img src="${prod.img}" style="width:100%; border-radius:8px;">

            <div class="product-info">
                <h2 class="prod-name">${prod.name}</h2>
                <p class="prod-price">R$ ${prod.price.toFixed(2)}</p>
                <p class="prod-category"><small>${prod.category}</small></p>
            </div>

            <div class="editor-area" style="display:none;">
                <input class="edit-name" type="text" value="${prod.name}">
                <input class="edit-price" type="number" step="0.01" value="${prod.price}">

                <select class="edit-category">
                    <option value="bebidas" ${prod.category === "bebidas" ? "selected" : ""}>Bebidas</option>
                    <option value="doces" ${prod.category === "doces" ? "selected" : ""}>Doces</option>
                    <option value="salgados" ${prod.category === "salgados" ? "selected" : ""}>Salgados</option>
                </select>
            </div>

            <button class="btn-primary edit-btn">Editar</button>
            <button class="btn-primary save-btn" style="display:none;">Salvar</button>
            <button class="btn-secondary delete-btn">Excluir</button>

            <!-- â­ Novo botÃ£o que leva para outra pÃ¡gina -->
            <button class="btn-secondary open-btn">EdiÃ§Ã£o profunda</button>
        `;

        const editBtn = card.querySelector(".edit-btn");
        const saveBtn = card.querySelector(".save-btn");
        const deleteBtn = card.querySelector(".delete-btn");
        const openBtn = card.querySelector(".open-btn");

        const viewArea = card.querySelector(".product-info");
        const editArea = card.querySelector(".editor-area");

        const nameField = card.querySelector(".edit-name");
        const priceField = card.querySelector(".edit-price");
        const categoryField = card.querySelector(".edit-category");

        editBtn.addEventListener("click", () => {
            viewArea.style.display = "none";
            editArea.style.display = "block";

            editBtn.style.display = "none";
            saveBtn.style.display = "block";
        });

        saveBtn.addEventListener("click", () => {
            prod.name = nameField.value;
            prod.price = parseFloat(priceField.value);
            prod.category = categoryField.value;

            renderProducts();
        });

        deleteBtn.addEventListener("click", () => {
            if (confirm(`Deseja excluir "${prod.name}"?`)) {
                products = products.filter(p => p.id !== prod.id);
                renderProducts();
            }
        });

        openBtn.addEventListener("click", () => {
            window.location.href = `Editar_Produto.html?id=${prod.id}`;
        });

        grid.appendChild(card);
    });
}

renderProducts();
document.getElementById("menu-btn").addEventListener("click", function() {
    const menu = document.getElementById("dropdown-menu");
    menu.style.display = menu.style.display === "none" ? "block" : "none";
});

document.addEventListener("click", function(e) {
    const menu = document.getElementById("dropdown-menu");
    const button = document.getElementById("menu-btn");

    if (!menu.contains(e.target) && !button.contains(e.target)) {
        menu.style.display = "none";
    }
});
</script>

</body>
</html>
